<!DOCTYPE html>

<head>
    <meta name="viewport" content="width=1024">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="/static/global_styles.css">
    <link rel="stylesheet" href="/static/new_page_styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="//unpkg.com/alpinejs" defer></script>

    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: { inlineMath: [['$', '$'], ['$$', '$$']] }
        });
    </script>
    <title>physilingUA</title>
    <link rel="icon" href="https://iili.io/JVBn4F1.png">
</head>

<body>
    <ul class="bar" x-data="{ pageName: '{{.PageName}}' }">
        <li :class="pageName === 'why' ? 'active-tab' : 'not-active-tab'"><a class="in-bar-text"
                href="./">physilingUA</a>
        </li>
        <li :class="pageName === 'how' ? 'active-tab' : 'not-active-tab'"><a class="in-bar-text" href="./how">–Ø–∫?</a>
        </li>
        <li :class="pageName === 'catalogue' ? 'active-tab' : 'not-active-tab'"><a class="in-bar-text"
                href="./catalogue">–ö–∞—Ç–∞–ª–æ–≥</a></li>
        <li :class="pageName === 'new' ? 'active-tab' : 'not-active-tab'"><a class="in-bar-text"
                href="./new">–°—Ç–≤–æ—Ä–∏—Ç–∏</a></li>
    </ul>

    <div class="page-body">
        <div id="popup" style="display: none;" class="popup">
            <p class="popup-text">üèÅ –§–æ—Ä–º–∞ –Ω–∞–¥—ñ—Å–ª–∞–Ω–∞ —É—Å–ø—ñ—à–Ω–æ! üèÅ</p>
        </div>

        <form class="problem-form-container" id="forma" onkeydown="return event.key != 'Enter';">
            <div class="message" id="message">
                —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏, –±—É–¥—å-–ª–∞—Å–∫–∞ –Ω–µ –∑–≤–µ—Ä—Ç–∞–π—Ç–µ —É–≤–∞–≥–∏ –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
            </div>
            <a class="instruction" style="margin-bottom: 0rem;">–í–∫–∞–∂—ñ—Ç—å –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á—ñ...</a>
            <div class="top-row-container">
                <div>
                    <div>
                        <section class="select-menu" id="selectMenu">
                            <input type="hidden" name="number" id="hiddenInput" required>
                            <div class="sl-btn" id="selectBtn">
                                <span id="selected-number">&#8470</span>
                                <i class="icon"><svg width="1em" height="1em" viewBox="0 0 24 24" fill="none"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="feather feather-chevron-down">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg></i>
                            </div>
                            <div class="sl-content">
                                <div class="sl-search">
                                    <input type="text" name="number" id="countryInput" placeholder="–ü–æ—à—É–∫"
                                        autocomplete="off" spellcheck="false">
                                </div>
                                <div class="sl-options">
                                    <ul id="CountryList"></ul>
                                </div>
                            </div>
                        </section>
                    </div>
                    <div id="number-error" class="error">
                        * –≤–∫–∞–∂—ñ—Ç—å –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á—ñ
                    </div>
                </div>

                <div class="submit-button-container" id="button-holder">
                    <button id="main-button" class="submit-button"><i class="fas fa-paper-plane"></i> –ù–∞–¥—ñ—Å–ª–∞—Ç–∏
                        –ø–µ—Ä–µ–∫–ª–∞–¥</button>
                </div>
            </div>

            <div class="problem-text-container" id="text-cont">
                <a class="instruction">–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞ –≤—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ –ø–µ—Ä–µ–∫–ª–∞–¥...</a>
                <div class="prb-fields">
                    <div class="input-container">
                        <textarea id="rawUserText" class="input-body" name="text" rows="10" cols="60"
                            placeholder="–£–≤–µ–¥—ñ—Ç—å –ø–µ—Ä–µ–∫–ª–∞–¥ –∑–∞–¥–∞—á—ñ.." required></textarea>
                    </div>

                    <div class="rendered-container">
                        <p class="rendered-body" class="no-text" id="renderedWindow">–¢—É—Ç –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏–º–µ—Ç—å—Å—è –≤–∞—à–∞
                            –∑–∞–¥–∞—á–∞...</p>
                    </div>
                </div>
            </div>

            <div class="problem-text-container" id="text-cont">
                <a class="instruction">–¢–∞–∫–æ–∂ –ø–µ—Ä–µ–∫–ª–∞–¥—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å –¥–æ –∑–∞–¥–∞—á—ñ...</a>
                <div class="prb-fields">
                    <div class="input-container">
                        <textarea id="rawUserAnswerText" name="answer" class="input-answer-body" rows="1" cols="60"
                            placeholder="–£–≤–µ–¥—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑–∞–¥–∞—á—ñ.." required></textarea>
                    </div>

                    <div class="rendered-container">
                        <a class="rendered-answer-body" class="no-text" id="renderedAnswerWindow">–í—ñ–¥–ø–æ–≤—ñ–¥—å...</a>
                    </div>
                </div>
            </div>

            <div class="optional-row">
                <div class="bottom-wraper">
                    <a class="instruction">–ó–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ, –≤–∫–ª–∞–¥—ñ—Ç—å –º–∞–ª—é–Ω–æ–∫ –¥–æ –∑–∞–¥–∞—á—ñ</a>

                    <div class="file-upload-container">

                        <div class="add-image-button">
                            <label for="imageUpload" class="custom-file-upload">
                                <i class="fas fa-file-upload" style="margin: 0.5rem;"></i> –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
                            </label>
                            <input type="file" id="imageUpload" name="images" accept="image/*" multiple
                                onchange="checkImageCount()">
                        </div>
                        <div class="files-and-message">
                            <div class="added-images" id="added-images">
                            </div>
                            <div class="writings">
                                <button class="clear-button" type="button" id="clr-butt"
                                    onclick="clearFileInput()">Clear</button>
                                <div class="error" id="error-message"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bottom-wraper">
                    <a class="instruction">–ü—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ –¥–æ–¥–∞–π—Ç–µ –∫–æ–º–µ–Ω—Ç–∞—Ä...</a>
                    <textarea id="comment" placeholder="–∫–æ–º–µ–Ω—Ç–∞—Ä.." name="comment" cols="40" rows="1"
                        class="comment"></textarea>
                </div>

            </div>

        </form>
    </div>
</body>

<script>
    var mydata = JSON.parse('{{.ProblemsList}}');
    var ready_problems = JSON.parse('{{.ReadyProblems}}')
    var pending_problems = JSON.parse('{{.WaitingProblems}}')
    var images_list = document.getElementById("added-images")
    function showUploadedImages(list) {
        let li = '';
        for (var i = 0; i < list.length; i++) {
            let file_name = list[i].name;
            li += `<div class="added-img">${file_name}</div>`;

        };
        images_list.innerHTML = li
    }

    var fileInput = document.getElementById('imageUpload');
    var errorMessage = document.getElementById('error-message');
    var clearButton = document.getElementById("clr-butt")

    function checkImageCount() {
        console.log(fileInput.files)

        if (fileInput.files.length > 3) {
            errorMessage.innerHTML = '* –æ–±–µ—Ä—ñ—Ç—å –¥–æ 3-–æ—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å!';
            errorMessage.style.display = "block"
            fileInput.value = '';
        } else {
            if (errorMessage != null) {
                errorMessage.style.display = "none"
            }
            showUploadedImages(fileInput.files)
            clearButton.style.display = "block"
        }
    }

    function clearFileInput() {
        var fileInput = document.getElementById('imageUpload');
        fileInput.value = '';
        var addedImagesDiv = document.getElementById('added-images');
        addedImagesDiv.innerHTML = '';
        if (errorMessage != null) {
            errorMessage.innerText = '';
        }
        clearButton.style.display = "none"
    }
</script>


<script src="/static/new_page_script.js"></script>

</html>